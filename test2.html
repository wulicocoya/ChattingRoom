<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container {
            width: 300px;
            height: 400px;
            border: 1px solid brown;
            margin: 200px auto;
            background-color: brown;
        }

        .input {
            width: 250px;
            margin-left: 20px;
            height: 30px;
        }

        .bt {
            margin-top: 20px;
        }

        button {
            margin-top: 7px;
            margin-left: 3px;
            width: 70px;
            height: 50px;
        }

        .cal {

            width: 40px;
            height: 30px;
            margin-left: 120px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="cal">计算器</div>
        <div class="input"><input type="text"></div>
        <div class="bt">
            <button>AC</button><button>CE</button>
            <button>%</button><button>/</button>
        </div>
        <div>
            <button>7</button><button>8</button>
            <button>9</button><button>*</button>
        </div>
        <div>
            <button>4</button><button>5</button>
            <button>6</button><button>-</button>
        </div>
        <div>
            <button>1</button><button>2</button>
            <button>3</button><button>+</button>
        </div>
        <div>
            <button>.</button><button>0</button>
            <button>Ans</button><button>=</button>
        </div>
    </div>
    <script>
        let btns = document.getElementsByTagName('button');
        let input = document.querySelector("input");
        let type, a, b, res;
        let len = btns.length;
        for (let i = 0; i < len; i++) {
            btns[i] = document.addEventListener('click', () => {
                let val = btns[i].innerHTML;
                let value = input.value;
                if (val >= 0 && val <= 9 || val === "." &&
                    value.indexOf(".") === -1) {
                        console.log(val);
                    input.value += val;
                }
                if (value === "" && val === ".") {
                    input.value = "";
                }
                if (value !== "") {
                    switch (val) {
                        case "AC":
                            input.value = "";
                            break;
                        case "CE":
                            let str = value.substring(0, value.length - 1);
                            input.value = str;
                            break;
                        case "+":
                            a = value;
                            input.value = "";
                            type = "+";

                            break;
                        case "-":
                            a = value;
                            input.value = "";
                            type = "-";
                            break;
                        case "*":
                            a = value;
                            input.value = "";
                            type = "*";

                            break;
                        case "/":
                            a = value;
                            input.value = "";
                            type = "/";

                            break;
                         case "%":
                             a = value;
                             input.value = "";
                             type = "%";

                             break;
                        case "=":
                            if (a !== undefined) {
                                b = value;
                                if (type === "+") {
                                    res = parseFloat(a) + parseFloat(b);
                                }
                                if (type === "-") {
                                    res = parseFloat(a) - parseFloat(b);
                                }
                                if (type === "*") {
                                    res = parseFloat(a) * parseFloat(b);
                                }
                                if (type === "/") {
                                    res = parseFloat(a) / parseFloat(b);
                                }
                                if (type === "%") {
                                    res = parseFloat(a) % parseFloat(b);
                                 }
                                let newStr = res + "";
                                let arr = newStr.split(".");
                                input.value = arr.length === 2 ?
                                    res.toFixed(2) : res;
                            }
                            break;
                    }
                }
            })
        }
    </script>
</body>

</html>